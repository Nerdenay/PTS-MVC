@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_DoctorLayout.cshtml";
    var fullName = Context.Session.GetString("UserName") + " " + Context.Session.GetString("UserLastName");
}

<h2 class="mb-4">Hoş geldiniz, Dr. @fullName !</h2>

@if (TempData["SearchError"] != null)
{
    <div class="alert alert-warning">
        @TempData["SearchError"]
    </div>
}

<div class="alert alert-success">
    Bugün sistemde yeni hastaları ve randevuları yönetebilirsiniz.
</div>

<div class="row g-4">
    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-calendar-day me-1 text-primary"></i> Bugünkü Randevu
                </h6>
                <h2 class="fw-bold text-primary">@ViewBag.TodayAppointments</h2>
                <p class="text-muted small mb-0">Bugün planlı toplam randevu</p>
                <a href="/Doctor/Appointments" class="text-decoration-none small d-block mt-2 text-primary">Tüm randevulara git <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-user-friends me-1 text-success"></i> Toplam Hasta
                </h6>
                <h2 class="fw-bold text-success">@ViewBag.TotalPatients</h2>
                <p class="text-muted small mb-0">Bu doktora ait benzersiz hasta sayısı</p>
                <a href="/Doctor/MyPatients" class="text-decoration-none small d-block mt-2 text-success">Hastaları görüntüle <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-prescription-bottle-alt me-1 text-warning"></i> Reçeteler
                </h6>
                <h2 class="fw-bold text-warning">@ViewBag.TotalPrescriptions</h2>
                <p class="text-muted small mb-0">Bu doktora ait reçete sayısı</p>
                <a href="/Doctor/CreatePrescription" class="text-decoration-none small d-block mt-2 text-warning">Reçete yaz <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-notes-medical me-1 text-danger"></i> Tanılar
                </h6>
                <h2 class="fw-bold text-danger">@ViewBag.TotalDiseases</h2>
                <p class="text-muted small mb-0">Hasta tanıları (hastalıklar)</p>
                <a href="/Doctor/CreateDisease" class="text-decoration-none small d-block mt-2 text-danger">Tanı ekle <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-file-medical me-1 text-info"></i> Tahliller
                </h6>
                <h2 class="fw-bold text-info">@ViewBag.TotalMedicalImages</h2>
                <p class="text-muted small mb-0">Yüklenen tahlil veya röntgen</p>
                <a href="/Doctor/UploadMedicalFile" class="text-decoration-none small d-block mt-2 text-info">Tahlil yükle <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-calendar-week me-1 text-dark"></i> Gelecek 14 Gün Randevu
                </h6>
                <h2 class="fw-bold text-dark">@ViewBag.UpcomingAppointments</h2>
                <p class="text-muted small mb-0">Yaklaşan 2 haftalık plan</p>
                <a href="/Doctor/Appointments?future=true" class="text-decoration-none small d-block mt-2 text-dark">Planları görüntüle <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-6">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-chart-line me-1 text-secondary"></i> En Yoğun Gün (Gelecek 14 Gün)
                </h6>
                <h4 class="fw-semibold mb-1">@ViewBag.BusiestUpcomingDayDate</h4>
                <p class="text-muted small mb-0">@ViewBag.BusiestUpcomingDayCount randevu</p>
            </div>
        </div>
    </div>
</div>
