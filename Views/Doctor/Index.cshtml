@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_DoctorLayout.cshtml";
    var fullName = Context.Session.GetString("UserName") + " " + Context.Session.GetString("UserLastName");
}

<h2 class="mb-4">Welcome, Dr. @fullName!</h2>

@if (TempData["SearchError"] != null)
{
    <div class="alert alert-warning">
        @TempData["SearchError"]
    </div>
}

<div class="alert alert-success">
    Today, you can manage new patients and appointments in the system.
</div>

<div class="row g-4">
    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-calendar-day me-1 text-primary"></i> Today's Appointments
                </h6>
                <h2 class="fw-bold text-primary">@ViewBag.TodayAppointments</h2>
                <p class="text-muted small mb-0">Total appointments scheduled for today</p>
                <a href="/Doctor/Appointments" class="text-decoration-none small d-block mt-2 text-primary">View all appointments <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-user-friends me-1 text-success"></i> Total Patients
                </h6>
                <h2 class="fw-bold text-success">@ViewBag.TotalPatients</h2>
                <p class="text-muted small mb-0">Unique patient count for this doctor</p>
                <a href="/Doctor/MyPatients" class="text-decoration-none small d-block mt-2 text-success">View patients <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-prescription-bottle-alt me-1 text-warning"></i> Prescriptions
                </h6>
                <h2 class="fw-bold text-warning">@ViewBag.TotalPrescriptions</h2>
                <p class="text-muted small mb-0">Number of prescriptions by this doctor</p>
                <a href="/Doctor/CreatePrescription" class="text-decoration-none small d-block mt-2 text-warning">Write prescription <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-notes-medical me-1 text-danger"></i> Diagnoses
                </h6>
                <h2 class="fw-bold text-danger">@ViewBag.TotalDiseases</h2>
                <p class="text-muted small mb-0">Patient diagnoses (diseases)</p>
                <a href="/Doctor/CreateDisease" class="text-decoration-none small d-block mt-2 text-danger">Add diagnosis <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-file-medical me-1 text-info"></i> Medical Files
                </h6>
                <h2 class="fw-bold text-info">@ViewBag.TotalMedicalImages</h2>
                <p class="text-muted small mb-0">Uploaded lab results or X-rays</p>
                <a href="/Doctor/UploadMedicalFile" class="text-decoration-none small d-block mt-2 text-info">Upload file <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-4">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-calendar-week me-1 text-dark"></i> Next 14 Days Appointments
                </h6>
                <h2 class="fw-bold text-dark">@ViewBag.UpcomingAppointments</h2>
                <p class="text-muted small mb-0">Upcoming 2-week schedule</p>
                <a href="/Doctor/Appointments?future=true" class="text-decoration-none small d-block mt-2 text-dark">View schedule <i class="fas fa-arrow-right small"></i></a>
            </div>
        </div>
    </div>

    <div class="col-sm-6 col-lg-6">
        <div class="card shadow-sm border-0 bg-light">
            <div class="card-body">
                <h6 class="text-muted">
                    <i class="fas fa-chart-line me-1 text-secondary"></i> Busiest Day (Next 14 Days)
                </h6>
                <h4 class="fw-semibold mb-1">@ViewBag.BusiestUpcomingDayDate</h4>
                <p class="text-muted small mb-0">@ViewBag.BusiestUpcomingDayCount appointments</p>
            </div>
        </div>
    </div>
</div>
